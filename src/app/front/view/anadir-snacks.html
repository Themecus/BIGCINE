<div class="cartelera-page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-inner container">
      <div class="hero-text">
        <h1 class="hero-title">
          <span class="cartelera-icon">üçø</span>
          <span class="cartelera-nombre">Dulcer√≠a <span class="cartelera-destacado">BIGCINE</span></span>
        </h1>
        <p class="hero-subtitle">Administra los productos de tu dulcer√≠a</p>
      </div>
    </div>
  </section>

  <!-- Formulario para agregar snacks -->
  <div class="container main-card">
    <div class="card shadow-lg mb-5">
      <div class="card-header bg-warning text-dark">
        <h4 class="mb-0">‚ûï Agregar Nuevo Snack</h4>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <!-- Nombre del Snack -->
          <div class="col-12 col-md-4">
            <label for="nombreSnack" class="form-label fw-bold">Nombre del Snack</label>
            <input
              id="nombreSnack"
              type="text"
              class="form-control"
              placeholder="Ej: Palomitas Grandes, Combo Familiar..."
              [(ngModel)]="nuevoSnack.nombre"
              (keypress)="manejarEnter($event)"
            >
          </div>

          <!-- Categor√≠a -->
          <div class="col-12 col-md-3">
            <label for="categoriaSnack" class="form-label fw-bold">Categor√≠a</label>
            <select
              id="categoriaSnack"
              class="form-select"
              [(ngModel)]="nuevoSnack.categoria"
            >
              <option *ngFor="let cat of categorias" [value]="cat.value">
                {{ cat.label }}
              </option>
            </select>
          </div>

          <!-- Precio -->
          <div class="col-12 col-md-2">
            <label for="precioSnack" class="form-label fw-bold">Precio ($)</label>
            <input
              id="precioSnack"
              type="number"
              class="form-control"
              placeholder="0.00"
              min="0"
              step="0.01"
              [(ngModel)]="nuevoSnack.precio"
              (keypress)="manejarEnter($event)"
            >
          </div>

          <!-- Stock -->
          <div class="col-12 col-md-2">
            <label for="stockSnack" class="form-label fw-bold">Stock</label>
            <input
              id="stockSnack"
              type="number"
              class="form-control"
              placeholder="0"
              min="0"
              [(ngModel)]="nuevoSnack.stock"
              (keypress)="manejarEnter($event)"
            >
          </div>
                  <!-- Descripci√≥n -->
            <div class="col-12 col-md-2">            
                <label for="descripcionSnack" class="form-label fw-bold">Descripci√≥n</label>
                <textarea
                id="descripcionSnack"
                class="form-control"
                rows="1"
                placeholder="Descripci√≥n del producto..."
                [(ngModel)]="nuevoSnack.descripcion"
                ></textarea>            
            </div>
        </div>
        </div>
    </div>


          <!-- Bot√≥n Agregar -->
          <div class="col-12 col-md-1 d-flex align-items-end">
            <button
              class="btn btn-success w-100"
              (click)="agregarSnack()"
              [disabled]="!nuevoSnack.nombre.trim() || nuevoSnack.precio <= 0"
            >
              ‚ûï
            </button>
          </div>
        </div>




  <!-- Inventario con cards estilo cartelera -->
  <main class="container main-card">
    <!-- Estado vac√≠o -->
    <div *ngIf="snacks.length === 0" class="empty-state">
      <div class="empty-box">
        <h3>No hay snacks en el inventario</h3>
        <p>Usa el formulario arriba para agregar tu primer snack.</p>
      </div>
    </div>

    <!-- Grid responsivo de snacks por categor√≠a -->
    <section *ngIf="snacks.length > 0">
      <div *ngFor="let categoria of categorias" class="mb-5">
        <!-- Header de categor√≠a -->
        <div class="categoria-header">
          <h2 class="categoria-title">
            {{ categoria.label }} 
            <span class="categoria-count">({{ getSnacksPorCategoria(categoria.value).length }})</span>
          </h2>
        </div>

        <!-- Grid de snacks -->
        <div class="cartelera-container" *ngIf="getSnacksPorCategoria(categoria.value).length > 0">
          <div class="grid">
            <article class="snack-card" *ngFor="let snack of getSnacksPorCategoria(categoria.value)" 
                     role="article" aria-label="Snack {{snack.nombre}}">
              
              <!-- Icono de categor√≠a -->
              <div class="snack-icon">
                <span class="categoria-icon">
                  {{ 
                    snack.categoria === 'PALOMITAS' ? 'üçø' :
                    snack.categoria === 'BEBIDAS' ? 'ü•§' :
                    snack.categoria === 'DULCES' ? 'üç´' :
                    snack.categoria === 'COMBOS' ? 'üì¶' : 'üçï'
                  }}
                </span>
              </div>

              <div class="card-body">
                <h3 class="snack-nombre">{{ snack.nombre }}</h3>
                <p class="snack-descripcion">{{ snack.descripcion || 'Sin descripci√≥n' }}</p>
                
                <div class="snack-info">
                  <div class="snack-precio">
                    <span class="precio-label">Precio:</span>
                    <span class="precio-valor">{{ formatearPrecio(snack.precio) }}</span>
                  </div>
                  
                  <div class="snack-stock" [class.stock-bajo]="snack.stock < 10">
                    <span class="stock-label">Stock:</span>
                    <span class="stock-valor">{{ snack.stock }}</span>
                  </div>
                </div>

                <!-- Badge de categor√≠a -->
                <div class="categoria-badge">
                  {{ 
                    snack.categoria === 'PALOMITAS' ? 'Palomitas' :
                    snack.categoria === 'BEBIDAS' ? 'Bebidas' :
                    snack.categoria === 'DULCES' ? 'Dulces' :
                    snack.categoria === 'COMBOS' ? 'Combos' : 'Otros'
                  }}
                </div>
              </div>
            </article>
          </div>
        </div>

        <!-- Mensaje si no hay snacks en esta categor√≠a -->
        <div *ngIf="getSnacksPorCategoria(categoria.value).length === 0" class="empty-categoria">
          <p class="text-muted">No hay snacks en esta categor√≠a</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="cartelera-footer">
    <div class="container footer-inner">
      <div class="footer-copy" style="width:100%;text-align:center;">&copy; 2025 BIGCINE - Dulcer√≠a</div>
    </div>
  </footer>
</div>